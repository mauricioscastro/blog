


<!DOCTYPE html>
<html lang="en-US">
    <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

    <style>
      header h1 {
        font-size: 38px;
      }
      h1 {
        font-size: 28px;
      }
      h2 {
        font-size: 20px;
      }      
      body {
        margin: 0px 50px 0px 50px; 
      }
      em {
        word-wrap: break-word;
      }
      p {
        word-wrap: break-word;
      }    
      .big img {
        display: block;
        max-width: 100%;
        height: auto;
      }
      .text_icon img {
        max-height: 0.7em; 
      }
      blockquote {
        padding: 0 0 0 5px;
        margin-bottom: 20px;
        font-size: 1.1em;
        border-left: 10px solid #9b9b9b;
        word-wrap: break-word;
      }
      ul {
        padding-left: 1em
      }
      li {
        padding-left: 1em
      }
      li:before {
        content: "";
        margin-left: -0.5rem;
      }
      table {
        border-collapse: collapse;
        width: 100%;
      }
      th, td {
        text-align: left;
        padding: 8px;
        word-wrap: break-word;
        padding: 3px 5px 3px 5px;
      }
      tr:nth-child(even) {
        background-color: #d7dae0;
      }
    </style>
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Blog Series | A compiled series of my day by day life stories and thoughts</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Blog Series" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Syntax Highlighted File Contents" />
<meta property="og:description" content="Syntax Highlighted File Contents" />
<meta property="og:site_name" content="Blog Series" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Blog Series" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Syntax Highlighted File Contents","headline":"Blog Series","url":"/Containerfile.html"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <header style="padding-bottom: 15px; padding-top: 20px;">
  <h1 style="word-break: break-word; margin-bottom: 0; border-bottom: 0; padding-bottom: 0;">
    <a href="/">Blog Series</a>
    
  </h1>
  <div>Syntax Highlighted File Contents</div>
</header>
    <section>
  <div style="padding-top: 10px;">
    
    
    <a href="Containerfile" style="color: #6d6d6d;"><div style="margin-bottom: 0; font-size: 110%; font-weight: bold;">Containerfile</div></a>
    
<figure class="highlight"><pre><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> docker.io/jekyll/builder</span>

<span class="k">ENV</span><span class="s"> WORKDIR="/workdir"</span>
<span class="k">ENV</span><span class="s"> GIT_REPO="https://github.com/mauricioscastro/blog"</span>
<span class="k">ENV</span><span class="s"> GIT_SSH_KEY="$WORKDIR/gitkey"</span>

<span class="k">ENTRYPOINT</span><span class="s"> \</span>
  repo_path=`echo $GIT_REPO | sed -e 's/.git//g' -e 's;.*/;;g'`; \
  function keep_pulling(){ chmod 0400 $GIT_SSH_KEY; cd $WORKDIR/$repo_path; while true; do sleep 10; git reset --hard &gt; /dev/null; git pull &gt; /dev/null 2&gt;&amp;1; done; }; \
  if [ `echo $GIT_REPO | egrep -c "^http"` -eq 0 ]; then export GIT_SSH_COMMAND="ssh -i $GIT_SSH_KEY -o IdentitiesOnly=yes -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no"; fi; \
  chmod 0400 $GIT_SSH_KEY; \
  cd $WORKDIR; \
  git clone $GIT_REPO; \
  cd $repo_path; \
  chmod -R a+rwx $WORKDIR; \
  bundle config set path $WORKDIR/bundle; \
  bundle install; \
  keep_pulling &amp; \
  bundle exec jekyll serve -w --incremental --host "0.0.0.0" -d $WORKDIR/site </code></pre></figure>

  </div>     
</section>
    <footer style="margin-top: 0;">
  
</footer>
  </body>
</html>